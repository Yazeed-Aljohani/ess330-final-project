<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yazeed Aljohani">
<meta name="author" content="Josh Puyear">
<meta name="author" content="Cade Vanek">

<title>ESS 330 Project Proposals</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="ESS 330 Project Proposals">
<meta name="citation_author" content="Yazeed Aljohani">
<meta name="citation_author" content="Josh Puyear">
<meta name="citation_author" content="Cade Vanek">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Global carbon budget 2018;,citation_author=Corinne Le Quéré;,citation_author=Robbie M Andrew;,citation_author=Pierre Friedlingstein;,citation_author=Stephen Sitch;,citation_author=Judith Hauck;,citation_author=Julia Pongratz;,citation_author=Penelope A Pickers;,citation_author=Jan Ivar Korsbakken;,citation_author=Glen P Peters;,citation_author=Josep G Canadell;,citation_author=others;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_issue=4;,citation_volume=10;,citation_journal_title=Earth System Science Data;,citation_publisher=Copernicus GmbH;">
<meta name="citation_reference" content="citation_title=Global and regional fluxes of carbon from land use and land cover change 1850–2015;,citation_author=Richard A Houghton;,citation_author=Alexander A Nassikas;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_issue=3;,citation_volume=31;,citation_journal_title=Global Biogeochemical Cycles;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=COVID-19 causes record decline in global CO2 emissions;,citation_author=Zhu Liu;,citation_author=Philippe Ciais;,citation_author=Zhu Deng;,citation_author=Ruixue Lei;,citation_author=Steven J Davis;,citation_author=Sha Feng;,citation_author=Bo Zheng;,citation_author=Duo Cui;,citation_author=Xinyu Dou;,citation_author=Pan He;,citation_author=others;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_journal_title=arXiv preprint arXiv:2004.13614;">
<meta name="citation_reference" content="citation_title=Current and future global climate impacts resulting from COVID-19;,citation_author=Piers M Forster;,citation_author=Harriet I Forster;,citation_author=Mat J Evans;,citation_author=Matthew J Gidden;,citation_author=Chris D Jones;,citation_author=Christoph A Keller;,citation_author=Robin D Lamboll;,citation_author=Corinne Le Quéré;,citation_author=Joeri Rogelj;,citation_author=Deborah Rosen;,citation_author=others;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_issue=10;,citation_volume=10;,citation_journal_title=Nature Climate Change;,citation_publisher=Nature Publishing Group UK London;">
<meta name="citation_reference" content="citation_title=Surface albedo data for climatic modeling;,citation_author=Ann Henderson-Sellers;,citation_author=Matthew F Wilson;,citation_publication_date=1983;,citation_cover_date=1983;,citation_year=1983;,citation_issue=8;,citation_volume=21;,citation_journal_title=Reviews of Geophysics;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=The changing character of precipitation;,citation_author=Kevin E Trenberth;,citation_author=Aiguo Dai;,citation_author=Roy M Rasmussen;,citation_author=David B Parsons;,citation_publication_date=2003;,citation_cover_date=2003;,citation_year=2003;,citation_issue=9;,citation_volume=84;,citation_journal_title=Bulletin of the American Meteorological Society;,citation_publisher=American Meteorological Society;">
<meta name="citation_reference" content="citation_title=Interpreting insect declines: Seven challenges and a way forward;,citation_author=Raphael K Didham;,citation_author=Yves Basset;,citation_author=C Matilda Collins;,citation_author=Simon R Leather;,citation_author=Nick A Littlewood;,citation_author=Myles HM Menz;,citation_author=Jörg Müller;,citation_author=Laurence Packer;,citation_author=Manu E Saunders;,citation_author=Karsten Schönrogge;,citation_author=others;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_issue=2;,citation_volume=13;,citation_journal_title=Insect Conservation and Diversity;,citation_publisher=Wiley Online Library;">
<meta name="citation_reference" content="citation_title=Mapping of CO2 at high spatiotemporal resolution using satellite observations: Global distributions from OCO-2;,citation_author=Dorit M Hammerling;,citation_author=Anna M Michalak;,citation_author=S Randolph Kawa;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_issue=D6;,citation_volume=117;,citation_journal_title=Journal of Geophysical Research: Atmospheres;,citation_publisher=Wiley Online Library;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ESS 330 Project Proposals</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Authors</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Yazeed Aljohani </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Josh Puyear </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Cade Vanek </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Colorado State University
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<p><strong>Yazeed Aljohani</strong> – <strong>Proposal 1: Land Use Change and Carbon Emissions in the United States</strong></p>
<p>Changes in land use, such as deforestation, urban expansion, and agriculture, are significant drivers of carbon emissions. While fossil fuels dominate global CO₂ emissions, land use changes contribute around 18 percent of global emissions (Le Quéré et al., 2018). In the U.S., cropland and urban expansion reduce the carbon sequestration capacity of forests and grasslands, exacerbating climate change. Mapping and quantifying these changes over time helps understand the trade-offs between development and carbon storage. Previous studies highlight the importance of long-term land monitoring and its link to emissions using remote sensing and modeling approaches (Houghton &amp; Nassikas, 2017).</p>
<p><strong>Objective:</strong> To assess how changes in land use from 2001 to 2021 have impacted carbon emissions across U.S. counties. Hypothesis: Counties with the greatest loss of forest cover will exhibit the highest net increases in carbon emissions over time.</p>
<p><strong>Proposed Methods</strong></p>
<p>We will integrate two key datasets:</p>
<p>Land use data from the National Land Cover Database (NLCD)</p>
<p>Carbon flux data from NASA’s ORNL DAAC FLUXNET or the Global Carbon Project</p>
<p>We will map land cover change over time and use linear regression to model the relationship between forest loss and net carbon flux.</p>
<p><strong>Expected Outcomes</strong></p>
<p>We expect to find a strong correlation between forest loss and increased net carbon emissions, especially in counties with high urban or agricultural expansion. This would reinforce the need to protect natural land cover for climate mitigation.</p>
<hr>
<p><strong>Yazeed Aljohani</strong> – <strong>Proposal 2: Comparing Transportation Emissions Before and After COVID-19 Lockdowns in Major U.S. Cities</strong></p>
<p>During the early months of the COVID-19 pandemic, global carbon dioxide emissions from fossil fuels dropped by about 7.8 percent. This was mainly because people traveled less and many activities stopped. Road transportation emissions fell by around 15.5 percent, and aviation declined by nearly 29 percent. These changes were seen around the world, including in China, Europe, and the United States (Liu et al., 2020). This natural experiment offers a unique opportunity to evaluate how reduced human activity affects urban carbon footprints. Understanding these impacts helps design low-carbon mobility solutions and inform policy for sustainable recovery (Forster et al., 2020).</p>
<p><strong>Objective:</strong> To compare transportation-related carbon emissions in five major U.S. cities before, during, and after COVID-19 lockdowns (2019–2022).<br>
<strong>Hypothesis:</strong> Cities with stronger lockdown measures and higher public transit reliance will show the greatest emission reductions.</p>
<p><strong>Proposed Methods</strong></p>
<p>We’ll combine:</p>
<ol type="1">
<li><p><strong>EPA’s National Emissions Inventory (NEI)</strong> for transportation-related CO₂</p></li>
<li><p><strong>Google COVID-19 Community Mobility Reports</strong> or city-specific traffic datasets</p></li>
</ol>
<p>We will calculate and visualize trends across time and perform ANOVA to compare emissions across periods. Tools: R (tidyverse, ggplot2), Quarto.</p>
<p><strong>Expected Outcomes</strong></p>
<p>We expect a clear drop in 2020 emissions followed by partial rebounds in 2021–22. The study can reveal how behavioral shifts contribute to decarbonization and highlight the role of transit systems in shaping emissions.</p>
<hr>
<p><strong>Cade Vanek</strong> – <strong>Proposal 3: Surface reflectivity as it relates to precipitation levels</strong>&nbsp;</p>
<p>This research project will set out to map and examine the relationship between precipitation levels and albedo in a given area. This is an important topic, as predicting rainfall is an extremely valuable field for examining ecosystems, as well as for growing crops and agriculture. Cities are being built with their albedo in mind, and while the relation between heat and albedo is well-known, I would like to examine how albedo impacts patterns of rainfall. This could be a consideration for city planning and deforestation operations, as it would be very useful to know if increasing or decreasing the local surface albedo would have any impacts on the surrounding levels of rainfall.&nbsp;</p>
<p><strong>Objective/hypothesis:</strong>&nbsp;</p>
<p>The objective of this research is to determine the role that albedo plays when it comes to precipitation levels. My hypothesis is that areas that reflect less light would have more precipitation, as there would be more heat. Examining this from a geospatial lens would allow us to get a clear picture of any correlations.&nbsp;</p>
<p><strong>Expected outcomes:</strong>&nbsp;</p>
<p>I would expect to find rainfall correlating to low reflectance. This knowledge would be important for things like ecosystem management and city planning, as albedo of the surface is a big consideration for how a given location interacts with climate/weather.&nbsp;</p>
<p>datasets:&nbsp;</p>
<p>GridMET&nbsp;</p>
<p>Abatzoglou J. T., Development of gridded surface meteorological data for ecological applications and modelling, International Journal of Climatology. (2012)<a href="https://doi.org/10.1002/joc.3413">doi:10.1002/joc.3413</a>&nbsp;</p>
<p>Surface Reflectance&nbsp;</p>
<p>Vermote, E., Wolfe, R. (2021). MODIS/Terra Surface Reflectance Daily L2G Global 250m SIN Grid V061 [Data set]. NASA EOSDIS Land Processes Distributed Active Archive Center. <a href="https://doi.org/10.5067/MODIS/MOD09GQ.061" class="uri">https://doi.org/10.5067/MODIS/MOD09GQ.061</a>&nbsp;</p>
<hr>
<p><strong>Cade Vanek</strong> – <strong>Proposal 4: Insect populations compared to CO2 emissions over time</strong></p>
<p>This research project aims to uncover the effect of increasing CO2 emissions on the decreasing population of insects around the US. Insects are a very important ecological indicator, so my goal for this proposal would be to examine the populations of insects over time, and see how they have shifted and moved in relation to CO2 emission from surrounding human development. The research is important, because insects have a huge variety of ecological niches that provide different services to the ecosystem. If we can determine how they are moving in response to our emissions, we can predict where they will be in the future, as well as hopefully determine if we can reduce emissions to help their falling populations.&nbsp;</p>
<p><strong>Objective/hypothesis:</strong>&nbsp;</p>
<p>The objective of this experiment is to determine how insect populations have moved over time in response to CO2. The goal is to create a map of the data that can be examined through different years, so we can look for patterns in movement over time.&nbsp;</p>
<p><strong>Expected outcomes:</strong>&nbsp;</p>
<p>I would expect to find that insects have been slowly pushed out of areas that emit considerable levels of CO2. These areas tend to be more industrialized, which pushes out native habitats as well as lowers the air quality.</p>
<p>Datasets:&nbsp;<br>
&nbsp;<br>
<a href="https://doi.org/10.3334/ORNLDAAC/1556">ACT-America: L2 In Situ Atmospheric CO2, CO, CH4, and O3 Concentrations, Eastern USA</a>&nbsp;</p>
<p><a href="https://lter.kbs.msu.edu/datasets/26" class="uri">https://lter.kbs.msu.edu/datasets/26</a>&nbsp;</p>
<p>&nbsp;<br>
(A possible dataset, I have had trouble finding insect populations arranged geographically.)&nbsp;</p>
<hr>
<p>Josh part will be added soon</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>